<!DOCTYPE html>
<html>
<head>
  <title>3 Lane Car Game</title>
  <style>
    body {
      margin: 0;
      text-align: center;
      background: #222;
      color: #fff;
      font-family: Arial, sans-serif;
    }
    canvas {
      display: block;
      margin: auto;
      background: #000;
    }
    #score { margin-top: 10px; font-size: 20px; }
    #restartBtn {
      display: none;
      font-size: 22px;
      padding: 10px 20px;
      margin-top: 20px;
      border-radius: 10px;
      background: red;
      color: white;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="300" height="600"></canvas>
  <p id="score">Score: 0</p>
  <button id="restartBtn">üîÑ Restart</button>

  <div id="controls">
    <button id="leftBtn">‚¨ÖÔ∏è</button>
    <button id="upBtn">‚¨ÜÔ∏è</button>
    <button id="downBtn">‚¨áÔ∏è</button>
    <button id="rightBtn">‚û°Ô∏è</button>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // background road
    let road = new Image();
    road.src = "images/road.png";

    // cars
    let car = new Image();
    car.src = "images/car.png";
    let enemies = [new Image(), new Image(), new Image()];
    enemies[0].src = "images/enemy1.png";
    enemies[1].src = "images/enemy2.png";
    enemies[2].src = "images/enemy3.png";

    const carWidth = 60;
    const carHeight = 100;
    const lanes = 3;
    const laneWidth = canvas.width / lanes;

    let currentLane = 1; // 0-left,1-middle,2-right
    let carX = currentLane * laneWidth + (laneWidth - carWidth) / 2;
    let carY = canvas.height - carHeight - 20;

    let speed = 5;
    let enemyCars = [];
    let score = 0;
    let gameOver = false;

    let roadY = 0;

    function drawBackground() {
      roadY += speed * 0.5;
      if (roadY >= canvas.height) roadY = 0;
      ctx.drawImage(road, 0, roadY, canvas.width, canvas.height);
      ctx.drawImage(road, 0, roadY - canvas.height, canvas.width, canvas.height);
    }

    function spawnEnemy() {
      if (gameOver) return;
      let lane = Math.floor(Math.random() * lanes);
      let x = lane * laneWidth + (laneWidth - carWidth) / 2;
      let y = -carHeight;
      let img = enemies[Math.floor(Math.random() * enemies.length)];
      enemyCars.push({ x, y, img });
    }

    function drawCar() {
      carX = currentLane * laneWidth + (laneWidth - carWidth) / 2;
      ctx.drawImage(car, carX, carY, carWidth, carHeight);
    }

    function drawEnemies() {
      for (let e of enemyCars) {
        ctx.drawImage(e.img, e.x, e.y, carWidth, carHeight);
      }
    }

    function updateEnemies() {
      for (let i = enemyCars.length - 1; i >= 0; i--) {
        let e = enemyCars[i];
        e.y += speed;

        if (e.y > canvas.height) {
          enemyCars.splice(i, 1);
          score += 10;
          document.getElementById("score").innerText = "Score: " + score;
        }

        if (
          carX < e.x + carWidth &&
          carX + carWidth > e.x &&
          carY < e.y + carHeight &&
          carY + carHeight > e.y
        ) {
          gameOver = true;
          showGameOver();
        }
      }
    }

    function showGameOver() {
      ctx.fillStyle = "rgba(0,0,0,0.6)";
      ctx.fillRect(0, canvas.height/3, canvas.width, 150);

      ctx.fillStyle = "red";
      ctx.font = "bold 40px Arial";
      ctx.textAlign = "center";
      ctx.fillText("GAME OVER", canvas.width/2, canvas.height/2);

      document.getElementById("restartBtn").style.display = "block";
    }

    function gameLoop() {
      if (gameOver) return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawBackground();
      drawCar();
      drawEnemies();
      updateEnemies();
      requestAnimationFrame(gameLoop);
    }

    // lane controls
    function moveLeft() { if (currentLane > 0) currentLane--; }
    function moveRight() { if (currentLane < lanes - 1) currentLane++; }

    // Keyboard
    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft") moveLeft();
      if (e.key === "ArrowRight") moveRight();
      if (e.key === "ArrowUp") speed = 8;
      if (e.key === "ArrowDown") speed = 3;
    });
    document.addEventListener("keyup", (e) => {
      if (e.key === "ArrowUp" || e.key === "ArrowDown") speed = 5;
    });

    // Mobile buttons
    document.getElementById("leftBtn").addEventListener("click", moveLeft);
    document.getElementById("rightBtn").addEventListener("click", moveRight);
    document.getElementById("upBtn").addEventListener("mousedown", () => { speed = 8; });
    document.getElementById("downBtn").addEventListener("mousedown", () => { speed = 3; });
    document.addEventListener("mouseup", () => { speed = 5; });

    setInterval(spawnEnemy, 2000);
    gameLoop();

    document.getElementById("restartBtn").addEventListener("click", () => {
      enemyCars = [];
      score = 0;
      speed = 5;
      gameOver = false;
      currentLane = 1;
      document.getElementById("score").innerText = "Score: 0";
      document.getElementById("restartBtn").style.display = "none";
      gameLoop();
    });
  </script>
</body>
</html>        if (
          carX < e.x + carWidth &&
          carX + carWidth > e.x &&
          carY < e.y + carHeight &&
          carY + carHeight > e.y
        ) {
          gameOver = true;
          document.getElementById("restartBtn").style.display = "block";
        }
      }
    }

    function gameLoop() {
      if (gameOver) return;

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      drawBackground();
      drawCar();
      drawEnemies();
      updateEnemies();

      requestAnimationFrame(gameLoop);
    }

    // Keyboard controls
    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft" && carX > 0) carX -= 20;
      if (e.key === "ArrowRight" && carX < canvas.width - carWidth) carX += 20;
      if (e.key === "ArrowUp") speed = 8;
      if (e.key === "ArrowDown") speed = 3;
    });
    document.addEventListener("keyup", (e) => {
      if (e.key === "ArrowUp" || e.key === "ArrowDown") speed = 5;
    });

    // Mobile controls
    document.getElementById("leftBtn").addEventListener("click", () => {
      if (carX > 0) carX -= 20;
    });
    document.getElementById("rightBtn").addEventListener("click", () => {
      if (carX < canvas.width - carWidth) carX += 20;
    });
    document.getElementById("upBtn").addEventListener("mousedown", () => {
      speed = 8;
    });
    document.getElementById("downBtn").addEventListener("mousedown", () => {
      speed = 3;
    });
    document.addEventListener("mouseup", () => {
      speed = 5;
    });

    setInterval(spawnEnemy, 2000);
    gameLoop();

    document.getElementById("restartBtn").addEventListener("click", () => {
      enemyCars = [];
      score = 0;
      speed = 5;
      gameOver = false;
      document.getElementById("score").innerText = "Score: 0";
      document.getElementById("restartBtn").style.display = "none";
      gameLoop();
    });
  </script>
</body>
</html>
